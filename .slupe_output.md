=== SLUPE RESULTS ===
a3f âœ… file_replace_text /Users/stuart/repos/slupe/proj/comp/listener/src/content-processor.ts
b7x âœ… file_replace_text /Users/stuart/repos/slupe/proj/comp/listener/src/content-processor.ts
c9k âœ… file_read /Users/stuart/repos/slupe/proj/comp/listener/test/unit/stripSummarySection.test.ts
=== END ===

=== OUTPUTS ===

[c9k] file_read:
=== START FILE: /Users/stuart/repos/slupe/proj/comp/listener/test/unit/stripSummarySection.test.ts ===
import { describe, it, expect } from 'vitest';
import { stripSummarySection } from '../../src/content-processor.js';

describe('stripSummarySection', () => {

  it('returns full content when no summary', () => {
    const content = '# My Document\n\nSome content here.';
    expect(stripSummarySection(content)).toBe(content);
  });

  it('strips summary at start of file', () => {
    const content = `ðŸ“‹ Copied to clipboard

=== SLUPE RESULTS ===
abc âœ… file_write /tmp/test.txt
=== END ===

# My Document

Some content here.`;

    const expected = `# My Document

Some content here.`;

    expect(stripSummarySection(content)).toBe(expected);
  });

  it('handles file ending with summary', () => {
    const content = `ðŸ“‹ Copied to clipboard

=== SLUPE RESULTS ===
abc âœ… file_write /tmp/test.txt
=== END ===`;

    expect(stripSummarySection(content)).toBe('');
  });

  it('handles no blank line after summary', () => {
    const content = `=== SLUPE RESULTS ===
abc âœ… file_write /tmp/test.txt
=== END ===
# Document`;

    expect(stripSummarySection(content)).toBe('# Document');
  });

  it('preserves END marker in regular content', () => {
    const content = `# Document

This is about === END === markers in content.

More text here.`;

    expect(stripSummarySection(content)).toBe(content);
  });
});
=== END FILE: /Users/stuart/repos/slupe/proj/comp/listener/test/unit/stripSummarySection.test.ts ===
=== END ===